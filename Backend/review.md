# Резюме:
## Backend

### Критерии, влияющие на работоспособность
- [x] <!--3.64--> В репозитории есть все необходимые инфраструктурные файлы:
  - [x] в проекте есть package.json;
  - [x] .editorconfig;
  - [x] .eslintrc, расширяющий конфигурацию airbnb-base, а также необходимые для работы линтера dev-зависимости;
  - [x] .gitignore.
  - [x] в .eslintrc добавлено исключение для _id _;
- [ ] <!--3.64--> Нет ошибок линтера.

Использование инлайновых директив, отключающих правила eslint, запрещено по заданию.
![image](https://user-images.githubusercontent.com/17438227/98569130-f2f3dd00-22c2-11eb-8048-5b62382fd958.png)

- [x] <!--3.64--> В разделе scripts файла package.json:
  - [x] есть команда npm run start, которая запускает сервер на localhost:3000;
  - [x] и npm run dev, которая запускает сервер на localhost:3000 с хот релоудом.
- [x] <!--12.57--> Когда все зависимости установлены, приложение запускается командой npm run dev без ошибок.
- [x] <!--25.45--> Описанные роуты работают корректно:
  - [x] запрос на GET /users/me возвращает информацию о пользователе (email и имя);
  - [x] GET /articles — все сохранённые статьи;
  - [x] POST /articles создаёт статью с переданными в теле данными;

По заданию свойство owner статьи не должно возвращаться базой
![image](https://user-images.githubusercontent.com/17438227/98569284-2e8ea700-22c3-11eb-94f3-77fb5178eb87.png)

- [x] DELETE /articles/articleId удаляет статью по _id _;
- [x] POST /signup создаёт пользователя с переданными в теле данными;
- [x] POST /signin возвращает JWT, если в теле запроса переданы правильные почта и пароль.
- [x] <!--3.64--> Все роуты, кроме /signin и /signup, защищены авторизацией.
- [x] <!--3.64--> Роуты пользователей и роуты статей описаны в отдельных файлах.
- [x] <!--3.64--> Ошибки API обрабатываются:
  - [x] если в запросе что-то не так, сервер возвращает ответ с ошибкой и её статусом;
  - [x] асинхронные обработчики завершены блоком catch;
  - [x] API не возвращает стандартных ошибок базы данных или Node.js.
- [ ] <!--3.64--> В production-режиме адрес базы данных берётся из process.env.

Адрес прописан статически и не зависит от режима запуска приложения.

- [x] <!--3.64--> Реализовано бережное хранение пароля:
  - [x] пароль хранится в зашифрованном виде;
  - [x] API не возвращает хеш пароля клиенту.
- [x] <!--3.64--> Данные валидируются перед добавлением в базу.
- [ ] <!--3.64--> Пользователь не может удалить сохранённую карточку из профиля другого пользователя.

findByIdAndRemove удаляет статью без проверки на принадлежность её к определённому пользователю. Поэтому статья сначала удалится, а только потом в then произойдёт проверка owner

- [x] <!--3.64--> К серверу можно обратиться и по http, и по https, обращаясь к домену, указанному в README.md.
- [x] <!--3.64--> Правильно реализовано хранение секретного ключа для создания JWT:
  - [x] для продакшн сборки он хранится в .env файле — этот файл не добавляется в git;
  - [x] в режиме разработки (при process.env.NODE_ENV !== 'production') код запускается и работает и без .env файла.

### Хорошие практики
- [x] <!--1.5--> Асинхронные операции реализованы промисами или async/await.
- [ ] <!--1.5--> Запрос валидируется перед передачей контроллеру. Тело и, где необходимо, заголовки и параметры, проверяются по соответствующим схемам. Если запрос не соответствует схеме, обработка не передаётся контроллеру, и клиент получает ошибку валидации.

Ожидается один параметр, но свойство body id. body нет в GET-запросах. Запрос уходит контроллеру
![image](https://user-images.githubusercontent.com/17438227/98569434-5b42be80-22c3-11eb-8685-1b157d441e1b.png)

- [x] <!--1.5--> Настроено логгирование:
  - [x] запросы и ответы записываются в файл request.log;
  - [ ] ошибки записываются в файл error.log;

Ошибка передаётся сразу на клиент, без передачи по цепочке обработки запроса. Ошибка не будет записана в лог.
![image](https://user-images.githubusercontent.com/17438227/98570423-7b26b200-22c4-11eb-9b72-00fe8701775b.png)

- [x] файлы логов не добавляются в репозиторий.
- [ ] <!--1.5--> Ошибки обрабатываются централизованным обработчиком.

Ошибка передаётся сразу на клиент, без передачи по цепочке обработки запроса.
![image](https://user-images.githubusercontent.com/17438227/98570423-7b26b200-22c4-11eb-9b72-00fe8701775b.png)

- [ ] <!--1.5--> Централизованный обработчик ошибок описан в отдельном модуле.
- [ ] <!--1.5--> В случае ошибки API возвращает статус ответа, который соответствует типу ошибки.

При попытке создать пользователя без пароля возникает следующая ошибка.
![image](https://user-images.githubusercontent.com/17438227/98569775-bd032880-22c3-11eb-8b1e-91a39f380076.png)

- [x] <!--1.5--> К серверу можно обратиться по https по адресу домена, указанному в README.md.
- [x] <!--1.5--> API приложения располагается на домене вида: name.zone/api, а не просто name.zone
- [ ] <!--1.5--> Все роуты подключены в файле index.js, который находится в папке routes. Оттуда единый роут подключается в файле app.js.

### Рекомендации
- [ ] <!--0.83--> Для ошибок API созданы классы, расширяющие конструктор Error.

Класс ошибки со статусом 401 объявлен, но не используется

- [x] <!--0.83--> Используется модуль Helmet для установки заголовков, связанных с безопасностью.
- [ ] <!--0.83--> Конфигурация и константы в отдельных файлах:
  - [ ] адрес Mongo-сервера в режиме разработки вынесен в отдельный конфигурационный файл;
  - [ ] секретный ключ для JWT в режиме разработки вынесен в отдельный конфигурационный файл;
  - [ ] константы приложения — сообщения ответов и ошибок — вынесены в отдельный файл с константами.
- [x] <!--0.83--> Настроен rate limiter: число запросов с одного IP в единицу времени ограничено.
- [x] <!--0.83--> rate limiter сконфигурирован в отдельном файле и импортируется в app.js
- [x] <!--0.83--> API размещено на отдельном поддомене, например: api.news-explorer.tk.

## Количество баллов: 80

## Доп. Комментарии:
- некорректное сообщение при неудачной аутентификации. Должно быть сообщение о том, что либо почтовый ящик, либо пароль введены неверно.
 ![image](https://user-images.githubusercontent.com/17438227/98569875-dc01ba80-22c3-11eb-8543-e1d4f5688586.png)
- limiter правильнее подключать первой мидлварой в цепочке обработки запроса, ведь при превышении количества запросов в период времени нет необходимости обрабатывать запрос дальше. 
